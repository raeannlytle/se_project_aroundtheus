!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}},t=class{constructor(e,t){let{cardData:n,handleImageClick:s}=e;this._name=n.name,this._link=n.link,this._cardSelector=t,this._cardData=n,this._handleImageClick=s}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector("#card-delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({name:this._name,src:this._link})}))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._element.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}renderCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}};function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){let{popupSelector:t}=e;n(this,"_handleEscapeClose",(e=>{"Escape"===e.key&&this.close()})),n(this,"_handleOverlay",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),document.addEventListener("mousedown",this._handleOverlay)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose),document.removeEventListener("mousedown",this._handleOverlay)}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal__close")&&this.close()}))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._formInputs=this._popupForm.querySelectorAll(".modal__form-input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const o=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),a=(document.querySelector("#modal-close-button"),document.querySelector("#profile-title-input")),l=document.querySelector("#profile-description-input"),c=document.querySelector("#card-add-modal"),u=document.querySelector("#profile-add-button"),d=(c.querySelector("#card-add-close"),i.querySelector("#profile-edit-form"),document.querySelector(".cards__list")),m=(c.querySelector("#card-add-form"),document.querySelector("#card-image-modal"),document.querySelector("#card-image-close"),document.querySelectorAll(".modal"),"#card-template"),_={inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},p=new e(_,document.querySelector("#profile-edit-form"));p.enableValidation();const h=new e(_,document.querySelector("#card-add-form"));h.enableValidation();const v=new r("#profile-edit-modal",(function(e){const t=e.title,n=e.description;f.setUserInfo({name:t,job:n}),v.close()}));v.setEventListeners();const S=new r("#card-add-modal",(function(e){b({name:e.title,link:e.link}),S.close()}));S.setEventListeners();const E=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector("#card-modal-image"),this._caption=this._popupElement.querySelector("#card-modal-caption")}open(e,t){this._caption.textContent=e,this._image.src=t,this._image.alt=e,super.open()}}("#card-image-modal");E.setEventListeners();const f=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=n}}({nameSelector:"#profile-title",jobSelector:"#profile-description"}),y=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._cardsList=t}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._cardsList.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:b},d);function b(e){const n=new t({cardData:e,handleImageClick:e=>{const t={name:e.name,link:e.src};E.open(t.name,t.link)}},m).renderCard();y.addItem(n)}y.renderItems(),o.addEventListener("click",(()=>{const{name:e,job:t}=f.getUserInfo();(e=>{let{name:t,job:n}=e;a.value=t,l.value=n})({name:e,job:t}),v.open(),p.resetValidation()})),u.addEventListener("click",(()=>{h.resetValidation(),S.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBSSxJQUFFeUQsR0FBUUYsRUFBU1csY0FOYnZFLEtBQW1CLElBQWxCLEtBQUVLLEVBQUksSUFBRXlELEdBQUs5RCxFQUNoQ2dELEVBQWtCSixNQUFRdkMsRUFDMUI0QyxFQUF3QkwsTUFBUWtCLENBQUcsRUFLbkN5QixDQUFZLENBQUVsRixPQUFNeUQsUUFDcEJOLEVBQWMxQixPQUNkdUIsRUFBa0J0RCxpQkFBaUIsSUFHckNvRCxFQUFjeEUsaUJBQWlCLFNBQVEsS0FDckM0RSxFQUFpQnhELGtCQUNqQmdFLEVBQWFqQyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9wdGlvbnMuZXJyb3JDbGFzcztcclxuXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpe1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgY2FyZERhdGEsIGhhbmRsZUltYWdlQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgICBcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmREYXRhID0gY2FyZERhdGE7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKSlcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtZGVsZXRlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCkpXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICAgIHNyYzogdGhpcy5fbGluayxcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuICAgICAgICBcclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJykuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcbiAgXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICBcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4gIFxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlT3ZlcmxheSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkgeyAgICBcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9fZm9ybS1pbnB1dCcpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5fZm9ybUlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlOyBcclxuICAgIH0pO1xyXG4gICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICAgfSlcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuXHR7XHJcblx0XHRuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG5cdFx0bGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG5cdFxyXG5cdH0sXHJcblx0e1xyXG5cdFx0bmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG5cdFx0bGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG5cclxuXHR9LFxyXG5cdHtcclxuXHRcdG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuXHRcdGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuXHRcclxuXHR9LFxyXG5cdHtcclxuXHRcdG5hbWU6IFwiTGF0ZW1hclwiLFxyXG5cdFx0bGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcblx0XHJcblx0fSxcclxuXHR7XHJcblx0XHRuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG5cdFx0bGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXHJcblx0XHJcblx0fSxcclxuXHR7XHJcblx0XHRuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcblx0XHRsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuXHR9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWVkaXQtbW9kYWwnKTsgXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWwtY2xvc2UtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLXRpdGxlLWlucHV0Jyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgKCcjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZENsb3NlQnV0dG9uID0gY2FyZEFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWFkZC1jbG9zZScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZWRpdC1mb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpc3QnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkQWRkRm9ybSA9IGNhcmRBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtYWRkLWZvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZEltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2UtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2VNb2RhbENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWNsb3NlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjsiLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCJcclxuXHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgY2FyZEFkZEJ1dHRvbixcclxuICBjYXJkTGlzdEVsZW1lbnQsXHJcbiAgY2FyZFNlbGVjdG9yLFxyXG4gIGluaXRpYWxDYXJkcyxcclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuLyogVmFsaWRhdGlvbiAqL1xyXG5leHBvcnQgY29uc3Qgb3B0aW9ucyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9wdGlvbnMsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWZvcm1cIikpO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWFkZC1mb3JtXCIpKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vKiBDbGFzc2VzICovXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5lZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjYXJkLWFkZC1tb2RhbFwiLCBoYW5kbGVBZGRGb3JtU3VibWl0KTtcclxuYWRkRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2NhcmQtaW1hZ2UtbW9kYWxcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvIChcclxuICB7XHJcbiAgICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtdGl0bGVcIixcclxuICAgIGpvYlNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXHJcbiAgfSk7XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24gKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFxyXG4gIGNhcmRMaXN0RWxlbWVudCxcclxuKTtcclxuXHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8qIEZ1bmN0aW9ucyAqL1xyXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGNhcmREYXRhLCBcclxuICAgIGhhbmRsZUltYWdlQ2xpY2s6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBpbWFnZSA9IHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmREYXRhLnNyYyxcclxuICAgICAgfVxyXG4gICAgICBpbWFnZVBvcHVwLm9wZW4oaW1hZ2UubmFtZSwgaW1hZ2UubGluayk7XHJcbiAgICB9XHJcbiAgfSwgY2FyZFNlbGVjdG9yKS5yZW5kZXJDYXJkKCk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gIFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgY29uc3QgdGl0bGUgPSBkYXRhLnRpdGxlO1xyXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICBuYW1lOiB0aXRsZSxcclxuICAgIGpvYjogZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcbiAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc3QgY2FyZCA9IHtcclxuICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgbGluazogaW5wdXRWYWx1ZXMubGluayxcclxuICB9XHJcbiAgcmVuZGVyQ2FyZChjYXJkKTtcclxuICBhZGRGb3JtUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3Qgc2V0VXNlckZvcm0gPSAoeyBuYW1lLCBqb2IgfSkgPT4ge1xyXG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGpvYjtcclxufVxyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBzZXRVc2VyRm9ybSh7IG5hbWUsIGpvYiB9KTsgXHJcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkRm9ybVBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1tb2RhbC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLW1vZGFsLWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87IiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IgKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRzTGlzdCkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jYXJkc0xpc3QgPSBjYXJkc0xpc3Q7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY2FyZHNMaXN0LnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRFbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJjYXJkRGF0YSIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2NhcmREYXRhIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInNyYyIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInJlbmRlckNhcmQiLCJhbHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2Zvcm1JbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNhcmRBZGRNb2RhbCIsImNhcmRBZGRCdXR0b24iLCJjYXJkTGlzdEVsZW1lbnQiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZWRpdEZvcm1Qb3B1cCIsImRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImpvYiIsImFkZEZvcm1Qb3B1cCIsImltYWdlUG9wdXAiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsIl9yZWYyIiwic2VjdGlvbiIsImNhcmRzTGlzdCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY2FyZHNMaXN0IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJjYXJkIiwiQ2FyZCIsImltYWdlIiwic2V0VXNlckZvcm0iXSwic291cmNlUm9vdCI6IiJ9